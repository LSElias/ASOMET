<!-- Main modal -->
<div
  id="authentication-modal"
  tabindex="-1"
  aria-hidden="true"
  class="fixed inset-0 z-50 flex items-center justify-center bg-gray-500 bg-opacity-75 scrollable"
  [class.hidden]="!isVisible"
>
  <div class="relative p-4 w-full max-w-md max-h-full">
    <!-- Modal content -->
    <div class="relative bg-white rounded-lg shadow">
      <div class="px-5 pt-5 flex justify-end">
        <button
          type="button"
          (click)="closeModal()"
          class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center"
        >
          <svg
            class="w-3 h-3"
            aria-hidden="true"
            xmlns="http://www.w3.org/2000/svg"
            fill="none"
            viewBox="0 0 14 14"
          >
            <path
              stroke="currentColor"
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
            />
          </svg>
          <span class="sr-only">Close modal</span>
        </button>
      </div>
      <!-- Modal header -->
      <div class="flex items-center justify-center">
        <div>
          <h3 class="text-2xl text-center font-semibold text-[#252b36] pb-8">
            Creación de usuario
          </h3>
        </div>
      </div>
      <!-- Modal body -->
      <div class="p-4 md:p-5">
        <!-- Formulario para crear o actualizar usuario -->
        <form
          [formGroup]="userFormCreate"
          novalidate
          class="flex flex-col gap-4"
        >
          <div>
            <label
              for="estados"
              class="block mb-2 text-sm font-medium text-[#344054]"
              >Tipo de rol
            </label>

            <select
              id="estados"
              name="idRol"
              formControlName="idRol"
              (change)="onChange($event)"
              class="w-full text-[#667085] font-medium rounded-lg text-sm px-5 py-2.5 inline-flex items-center border-gray-300"
            >
              <option value="" disabled selected
                >Seleccione el rol</option
              >
              <option *ngFor="let rol of roles" [value]="rol.id">
                {{ rol.name }}
              </option>
            </select>
            <mat-error *ngIf="errorHandling('idRol', 'required')">
              El tipo de rol es <strong>requerido</strong>.
            </mat-error>
          </div>
          <div>
            <div>
              <label
                for="correo"
                class="block mb-2 text-sm font-medium text-[#344054]"
                >Correo
              </label>
              <input
                type="correo"
                name="correo"
                id="correo"
                placeholder="ejemplo@gmail.com"
                formControlName="correo"
                class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                required
              />
              <mat-error *ngIf="errorHandling('correo', 'required')">
                El correo es <strong>requerido</strong>.
              </mat-error>
              <mat-error *ngIf="errorHandling('correo', 'email')">
                El correo debe tener formato de correo. Ejemplo
                <strong>abc126@correo.com</strong>.
              </mat-error>
            </div>
          </div>
          <div>
            <label
              for="cedula"
              class="block mb-2 text-sm font-medium text-[#344054]"
              >Cédula</label
            >
            <input
              type="text"
              id="cedula"
              name="cedula"
              placeholder="123456789 (Nacional) ó 123456789012 (DIMEX)"
              formControlName="cedula"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              required
            />
            <mat-error *ngIf="errorHandling('cedula', 'required')">
              La cédula es <strong>requerida</strong>.
            </mat-error>
            <mat-error *ngIf="errorHandling('cedula', 'pattern')">
              La cédula solo deberá tener digitos <strong>numéricos</strong>.
            </mat-error>
            <mat-error *ngIf="errorHandling('cedula', 'minLength')">
              La cédula deberá tener digitos al menos
              <strong>9 digitos</strong>.
            </mat-error>
            <mat-error *ngIf="errorHandling('cedula', 'maxLength')">
              La cédula deberá tener digitos hasta <strong>12 digitos</strong>.
            </mat-error>
          </div>

          <div>
            <label
              for="name"
              class="block mb-2 text-sm font-medium text-[#344054]"
              >Nombre</label
            >
            <input
              type="text"
              id="nombreCompleto"
              placeholder="Nombre completo"
              name="nombreCompleto"
              formControlName="nombreCompleto"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              required
            />
            <mat-error *ngIf="errorHandling('nombreCompleto', 'required')">
              El nombre es <strong>requerido</strong>.
            </mat-error>
            <mat-error *ngIf="errorHandling('nombreCompleto', 'minLength')">
              El nombre debe tener al menos <strong>8 digitos</strong>.
            </mat-error>
          </div>

          <div *ngIf="idRol == 2">
            <label
              for="contrasena"
              class="block mb-2 text-sm font-medium text-[#344054]"
              >Contraseña</label
            >
            <input
              type="password"
              id="contrasena"
              placeholder="**********"
              name="contrasena"
              formControlName="contrasena"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              required
            />
            <mat-error *ngIf="errorHandling('contrasena', 'required')">
              La contraseña es <strong>requerida</strong>.
            </mat-error>
            <mat-error *ngIf="errorHandling('contrasena', 'minLength')">
              La contraseña deberá tener digitos al menos
              <strong>8 digitos</strong>.
            </mat-error>
            <mat-error *ngIf="errorHandling('contrasena', 'maxLength')">
              La contraseña deberá tener digitos hasta
              <strong>20 digitos</strong>.
            </mat-error>
          </div>

          <div>
            <label
              for="telefono"
              class="block mb-2 text-sm font-medium text-[#344054]"
              >Teléfono</label
            >
            <input
              type="text"
              id="telefono"
              placeholder="62503829"
              name="telefono"
              formControlName="telefono"
              class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
              required
            />
            <mat-error *ngIf="errorHandling('telefono', 'required')">
              El teléfono es <strong>requerido</strong>.
            </mat-error>
            <mat-error *ngIf="errorHandling('telefono', 'pattern')">
              El teléfono solo deberá tener digitos <strong>numéricos</strong>.
            </mat-error>
            <mat-error *ngIf="errorHandling('telefono', 'minLength')">
              El teléfono deberá tener digitos al menos
              <strong>9 digitos</strong>.
            </mat-error>
            <mat-error *ngIf="errorHandling('telefono', 'maxLength')">
              El teléfono deberá tener digitos hasta
              <strong>12 digitos</strong>.
            </mat-error>
          </div>
          <button
            (click)="onSubmit()"
            type="submit"
            class="mt-4 w-full text-white bg-[#E8A25A] hover:bg-[#c48546] focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center"
          >
            Guardar
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
